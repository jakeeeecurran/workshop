<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Ready - Workshop Queue System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 25%, #2d3748 50%, #1a1f2e 75%, #0f1419 100%);
            min-height: 100vh;
            color: #2c3e50;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
            width: 100%;
            box-sizing: border-box;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 5rem;
            margin-bottom: 25px;
            text-shadow: 0 8px 16px rgba(0,0,0,0.5);
            font-weight: 700;
            letter-spacing: 6px;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 50%, #e3f2fd 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            text-transform: uppercase;
        }

        .header h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 4px;
            background: linear-gradient(90deg, transparent, #3498db, transparent);
            border-radius: 2px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .view-toggle {
            text-align: center;
            margin-bottom: 30px;
        }

        .toggle-btn {
            background: rgba(255,255,255,0.12);
            border: 2px solid rgba(255,255,255,0.25);
            color: white;
            padding: 22px 50px;
            margin: 0 18px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1.4rem;
            font-weight: 600;
            transition: all 0.3s ease;
            backdrop-filter: blur(15px);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .toggle-btn:hover, .toggle-btn.active {
            background: rgba(255,255,255,0.98);
            color: #1a1f2e;
            border-color: rgba(255,255,255,0.9);
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.3);
        }

        .view {
            display: none;
            background: rgba(255,255,255,0.95);
            border-radius: 8px;
            padding: 40px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .view.active {
            display: block;
        }

        /* Form Styles */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            font-weight: bold;
            margin-bottom: 12px;
            color: #555;
            font-size: 1.2rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 18px;
            border: 2px solid #e1e8ed;
            border-radius: 4px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.9);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
            background: white;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid #e1e8ed;
            border-radius: 4px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .checkbox-item:hover {
            border-color: #3498db;
            background: rgba(255, 255, 255, 0.95);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.15);
        }

        .checkbox-item input[type="checkbox"] {
            width: 24px;
            height: 24px;
            margin-right: 15px;
            accent-color: #3498db;
            cursor: pointer;
        }

        .checkbox-item label {
            font-weight: 500;
            color: #333;
            cursor: pointer;
            margin: 0;
            font-size: 1.1rem;
        }

        .submit-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 22px 50px;
            border-radius: 4px;
            font-size: 1.4rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.2);
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
        }

        /* Dashboard Styles */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e9ecef;
        }

        .queue-count {
            font-size: 1.3rem;
            font-weight: 600;
            color: #495057;
        }

        .admin-controls {
            display: flex;
            gap: 10px;
        }

        .admin-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 2px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .admin-btn:hover {
            background: #5a6268;
            transform: translateY(-1px);
        }

        .admin-btn.upload {
            background: #28a745;
        }

        .admin-btn.upload:hover {
            background: #218838;
        }

        .admin-btn.export {
            background: #17a2b8;
        }

        .admin-btn.export:hover {
            background: #138496;
        }

        .queue-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            max-width: 100%;
        }

        .queue-item {
            background: white;
            border: 1px solid #e1e8ed;
            border-radius: 8px;
            padding: 16px;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            min-height: 240px;
            display: flex;
            flex-direction: column;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .queue-item:hover {
            border-color: #3498db;
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.1);
            transform: translateY(-2px);
        }

        .queue-item.completing {
            animation: completeAnimation 1.5s ease-out forwards;
        }

        @keyframes completeAnimation {
            0% {
                transform: scale(1);
                opacity: 1;
                background: rgba(255, 255, 255, 0.95);
            }
            50% {
                transform: scale(1.05);
                opacity: 0.8;
                background: rgba(39, 174, 96, 0.1);
            }
            100% {
                transform: scale(0.8) translateY(-20px);
                opacity: 0;
                background: rgba(39, 174, 96, 0.2);
            }
        }

        .queue-item.new {
            animation: slideIn 0.5s ease-out;
            border-color: #28a745;
            background: #f8fff9;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .stock-number {
            font-size: 1.6rem;
            font-weight: 700;
            color: #2c3e50;
            letter-spacing: 0.5px;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .timestamp {
            font-size: 0.75rem;
            color: #6c757d;
            text-align: right;
            white-space: nowrap;
        }

        .vehicle-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .info-group {
            display: flex;
            flex-direction: column;
            min-width: 0;
        }

        .info-label {
            font-weight: 600;
            color: #666;
            margin-bottom: 4px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .info-value {
            font-size: 1rem;
            color: #2c3e50;
            font-weight: 500;
            word-wrap: break-word;
            overflow-wrap: break-word;
            line-height: 1.3;
        }

        .date-display {
            font-weight: 600;
            color: #e74c3c;
        }

        .purpose-display {
            font-weight: 600;
        }

        .priority-purpose {
            color: #e74c3c !important;
            font-weight: 700;
        }

        .work-required {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 12px;
            margin-top: 12px;
            flex-grow: 1;
            min-height: 80px;
        }

        .work-required .info-label {
            color: #495057;
            margin-bottom: 8px;
        }

        .work-required .info-value {
            color: #495057;
            line-height: 1.5;
            font-weight: 400;
        }

        .work-items {
            display: flex;
            flex-wrap: wrap;
            gap: 3px;
            margin-bottom: 6px;
        }

        .work-tag {
            background: #3498db;
            color: white;
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 0.7rem;
            font-weight: 500;
            margin: 1px;
            display: inline-block;
            white-space: nowrap;
        }

        .additional-work {
            margin-top: 6px;
            padding: 6px 10px;
            background: #fff3cd;
            border-radius: 2px;
            border-left: 3px solid #f39c12;
            font-size: 0.8rem;
        }

        .status-section {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .status-item.completed {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-item.pending {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .status-item.onsite {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .status-item.offsite {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status-icon {
            font-size: 0.8rem;
        }

        .status-text {
            white-space: nowrap;
        }

        .item-actions {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            margin-top: auto;
            padding-top: 12px;
            flex-wrap: wrap;
        }

        .edit-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.2s ease;
            white-space: nowrap;
            min-width: 60px;
        }

        .edit-btn:hover {
            background: #5a6268;
            transform: translateY(-1px);
        }

        .ready-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.2s ease;
            white-space: nowrap;
            min-width: 60px;
        }

        .ready-btn:hover {
            background: #2ecc71;
            transform: translateY(-1px);
        }

        .ready-btn:active {
            transform: translateY(0);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-state h3 {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #999;
        }

        .empty-state p {
            font-size: 1.1rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            text-align: center;
        }

        .modal h3 {
            margin-bottom: 20px;
            color: #333;
        }

        .modal input {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .modal-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
        }

        .modal-btn.confirm {
            background: #dc3545;
            color: white;
        }

        .modal-btn.cancel {
            background: #6c757d;
            color: white;
        }

        /* Responsive Design */
        @media (max-width: 1800px) {
            .queue-list {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            }
        }

        @media (max-width: 1400px) {
            .queue-list {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
        }

        @media (max-width: 1100px) {
            .queue-list {
                grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            }
            
            .vehicle-info {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }

            .queue-list {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .queue-item {
                padding: 15px;
                min-height: auto;
            }

            .vehicle-info {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .item-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .stock-number {
                font-size: 1.4rem;
            }
            
            .timestamp {
                font-size: 0.7rem;
                text-align: left;
            }

            .dashboard-header {
                flex-direction: column;
                gap: 15px;
            }

            .admin-controls {
                flex-wrap: wrap;
                justify-content: center;
            }

            .header h1 {
                font-size: 2rem;
            }
            
            .item-actions {
                justify-content: center;
                gap: 10px;
            }
            
            .edit-btn, .ready-btn {
                padding: 10px 16px;
                font-size: 0.9rem;
                min-width: 80px;
            }
        }
        
        @media (max-width: 480px) {
            .vehicle-info {
                grid-template-columns: 1fr;
            }
            
            .queue-item {
                padding: 12px;
            }
            
            .work-required {
                padding: 10px;
            }
            
            .item-actions {
                flex-direction: column;
                gap: 8px;
            }
            
            .edit-btn, .ready-btn {
                width: 100%;
                padding: 12px;
                font-size: 1rem;
            }
        }

        /* Auto-refresh indicator */
        .refresh-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.95);
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            color: #3498db;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            font-weight: 500;
        }

        .dashboard-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(0,0,0,0.3);
            border: none;
            border-radius: 4px;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }

        .dashboard-toggle:hover {
            background: rgba(0,0,0,0.5);
        }

        #dashboard-view:hover .dashboard-toggle {
            opacity: 1;
        }

        .view-toggle.hidden {
            display: none;
        }

        .dashboard-header.hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">


        <div class="view-toggle" id="view-toggle">
            <button class="toggle-btn active" onclick="switchView('form')">📝 Add Vehicle</button>
            <button class="toggle-btn" onclick="switchView('dashboard')">📊 Workshop Dashboard</button>
        </div>

        <!-- Form View -->
        <div id="form-view" class="view active">
            <h2 style="margin-bottom: 25px; color: #667eea;">Add New Vehicle to Queue</h2>
            <form id="vehicle-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="stockNumber">Stock Number *</label>
                        <input type="text" id="stockNumber" name="stockNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="brand">Brand *</label>
                        <select id="brand" name="brand" required>
                            <option value="">Select Brand</option>
                            <option value="VOLVO">VOLVO</option>
                            <option value="MG">MG</option>
                            <option value="JEEP">JEEP</option>
                            <option value="LDV">LDV</option>
                            <option value="POLESTAR">POLESTAR</option>
                            <option value="LEAPMOTOR">LEAPMOTOR</option>
                            <option value="OTHER/USED">OTHER/USED</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="model">Model *</label>
                        <input type="text" id="model" name="model" required>
                    </div>
                    <div class="form-group">
                        <label for="dateRequired">Date Required *</label>
                        <input type="date" id="dateRequired" name="dateRequired" required>
                    </div>
                    <div class="form-group">
                        <label for="salesman">Salesman *</label>
                        <select id="salesman" name="salesman" required>
                            <option value="">Select Salesman</option>
                            <option value="Jake C">Jake C</option>
                            <option value="Keith C">Keith C</option>
                            <option value="Michael R">Michael R</option>
                            <option value="Jason B">Jason B</option>
                            <option value="Mark K">Mark K</option>
                            <option value="Wendy B">Wendy B</option>
                            <option value="Charles R">Charles R</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="purpose">Purpose *</label>
                        <select id="purpose" name="purpose" required>
                            <option value="">Select Purpose</option>
                            <option value="Retail">Retail</option>
                            <option value="Mark as Priority">Mark as Priority</option>
                            <option value="Showroom">Showroom</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label>Standard Work Required</label>
                        <div class="checkbox-grid">
                            <div class="checkbox-item">
                                <input type="checkbox" id="pd" name="pd" value="PD">
                                <label for="pd">PD</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="softwareUpdate" name="softwareUpdate" value="Software Update">
                                <label for="softwareUpdate">Software Update</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="selektChecklist" name="selektChecklist" value="Selekt Checklist">
                                <label for="selektChecklist">Selekt Checklist</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="roofracks" name="roofracks" value="Roofracks">
                                <label for="roofracks">Roofracks</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="mudflaps" name="mudflaps" value="Mudflaps">
                                <label for="mudflaps">Mudflaps</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="towbar" name="towbar" value="Towbar">
                                <label for="towbar">Towbar</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="bumperProtector" name="bumperProtector" value="Bumper Protector">
                                <label for="bumperProtector">Bumper Protector</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="bootmat" name="bootmat" value="Bootmat">
                                <label for="bootmat">Bootmat</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label for="additionalWork">Additional Work</label>
                        <textarea id="additionalWork" name="additionalWork" placeholder="Any additional work or special requirements..."></textarea>
                    </div>
                    <div class="form-group full-width">
                        <label>Status</label>
                        <div class="checkbox-grid">
                            <div class="checkbox-item">
                                <input type="checkbox" id="roCompleted" name="roCompleted" value="RO Completed">
                                <label for="roCompleted">RO Completed</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="carOnsite" name="carOnsite" value="Car Onsite">
                                <label for="carOnsite">Car Onsite</label>
                            </div>
                        </div>
                    </div>
                </div>
                <button type="submit" class="submit-btn">🚀 Add to Queue</button>
            </form>
        </div>

        <!-- Dashboard View -->
        <div id="dashboard-view" class="view">
            <button class="dashboard-toggle" onclick="toggleDashboardControls()" title="Toggle Controls">⚙️</button>
            <div class="dashboard-header" id="dashboard-header">
                <div class="queue-count">
                    <span id="queue-count">0</span> vehicles in queue
                </div>
                <div class="admin-controls">
                    <button class="admin-btn upload" onclick="showUploadModal()">📁 Upload CSV</button>
                    <button class="admin-btn export" onclick="exportToCSV()">📊 Export CSV</button>
                    <button class="admin-btn" onclick="showClearModal()">🗑️ Clear All</button>
                </div>
            </div>
            
            <div id="queue-list" class="queue-list">
                <!-- Queue items will be populated here -->
            </div>
        </div>
    </div>

    <!-- Auto-refresh indicator -->
    <div class="refresh-indicator" id="refresh-indicator">
        🔄 Auto-refreshing
    </div>

    <!-- Clear Confirmation Modal -->
    <div id="clearModal" class="modal">
        <div class="modal-content">
            <h3>🔒 Admin Access Required</h3>
            <p>Enter password to clear all vehicles from queue:</p>
            <input type="password" id="adminPassword" placeholder="Enter password">
            <div class="modal-buttons">
                <button class="modal-btn confirm" onclick="clearQueue()">Clear All</button>
                <button class="modal-btn cancel" onclick="hideClearModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Upload CSV Modal -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <h3>📁 Upload CSV File</h3>
            <p>Upload a CSV file to import existing vehicles. Expected columns: Stock Number, Brand, Model, Date Required, Salesman, Purpose, Work Required</p>
            <input type="file" id="csvFile" accept=".csv" style="margin: 20px 0;">
            <div class="modal-buttons">
                <button class="modal-btn confirm" onclick="uploadCSV()">Upload</button>
                <button class="modal-btn cancel" onclick="hideUploadModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Edit Vehicle Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <h3>✏️ Edit Vehicle</h3>
            <form id="edit-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="editStockNumber">Stock Number *</label>
                        <input type="text" id="editStockNumber" name="stockNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="editBrand">Brand *</label>
                        <select id="editBrand" name="brand" required>
                            <option value="">Select Brand</option>
                            <option value="VOLVO">VOLVO</option>
                            <option value="MG">MG</option>
                            <option value="JEEP">JEEP</option>
                            <option value="LDV">LDV</option>
                            <option value="POLESTAR">POLESTAR</option>
                            <option value="LEAPMOTOR">LEAPMOTOR</option>
                            <option value="OTHER/USED">OTHER/USED</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editModel">Model *</label>
                        <input type="text" id="editModel" name="model" required>
                    </div>
                    <div class="form-group">
                        <label for="editDateRequired">Date Required *</label>
                        <input type="date" id="editDateRequired" name="dateRequired" required>
                    </div>
                    <div class="form-group">
                        <label for="editSalesman">Salesman *</label>
                        <select id="editSalesman" name="salesman" required>
                            <option value="">Select Salesman</option>
                            <option value="Jake C">Jake C</option>
                            <option value="Keith C">Keith C</option>
                            <option value="Michael R">Michael R</option>
                            <option value="Jason B">Jason B</option>
                            <option value="Mark K">Mark K</option>
                            <option value="Wendy B">Wendy B</option>
                            <option value="Charles R">Charles R</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editPurpose">Purpose *</label>
                        <select id="editPurpose" name="purpose" required>
                            <option value="">Select Purpose</option>
                            <option value="Retail">Retail</option>
                            <option value="Mark as Priority">Mark as Priority</option>
                            <option value="Showroom">Showroom</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="form-group full-width">
                    <label>Standard Work Required</label>
                    <div class="checkbox-grid">
                        <div class="checkbox-item">
                            <input type="checkbox" id="editPd" name="pd" value="PD">
                            <label for="editPd">PD</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="editSoftwareUpdate" name="softwareUpdate" value="Software Update">
                            <label for="editSoftwareUpdate">Software Update</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="editSelektChecklist" name="selektChecklist" value="Selekt Checklist">
                            <label for="editSelektChecklist">Selekt Checklist</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="editRoofracks" name="roofracks" value="Roofracks">
                            <label for="editRoofracks">Roofracks</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="editMudflaps" name="mudflaps" value="Mudflaps">
                            <label for="editMudflaps">Mudflaps</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="editTowbar" name="towbar" value="Towbar">
                            <label for="editTowbar">Towbar</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="editBumperProtector" name="bumperProtector" value="Bumper Protector">
                            <label for="editBumperProtector">Bumper Protector</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="editBootmat" name="bootmat" value="Bootmat">
                            <label for="editBootmat">Bootmat</label>
                        </div>
                    </div>
                </div>
                <div class="form-group full-width">
                    <label for="editAdditionalWork">Additional Work</label>
                    <textarea id="editAdditionalWork" name="additionalWork" placeholder="Any additional work or special requirements..."></textarea>
                </div>
                <div class="form-group full-width">
                    <label>Status</label>
                    <div class="checkbox-grid">
                        <div class="checkbox-item">
                            <input type="checkbox" id="editRoCompleted" name="roCompleted" value="RO Completed">
                            <label for="editRoCompleted">RO Completed</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="editCarOnsite" name="carOnsite" value="Car Onsite">
                            <label for="editCarOnsite">Car Onsite</label>
                        </div>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="modal-btn confirm">Save Changes</button>
                    <button type="button" class="modal-btn cancel" onclick="hideEditModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Global variables
        let vehicles = [];
        const ADMIN_PASSWORD = 'workshop2024'; // Change this to your desired password
        let currentView = 'form';
        let autoRefreshInterval;
        let lastDataHash = '';
        let editingVehicleId = null;
        let dashboardControlsHidden = false;
        // Auto-detect API URL based on current location
        const API_BASE_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
            ? 'http://localhost:3001/api'
            : 'https://workshop-vyuh.onrender.com/api';

        // Date formatting function
        function formatRelativeDate(dateString) {
            const today = new Date();
            const targetDate = new Date(dateString);
            
            // Reset time to compare dates only
            today.setHours(0, 0, 0, 0);
            targetDate.setHours(0, 0, 0, 0);
            
            const diffTime = targetDate - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) {
                return 'Today';
            } else if (diffDays === 1) {
                return 'Tomorrow';
            } else if (diffDays === -1) {
                return 'Yesterday';
            } else if (diffDays > 1 && diffDays <= 7) {
                const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                return dayNames[targetDate.getDay()];
            } else if (diffDays > 7 && diffDays <= 14) {
                return 'Next Week';
            } else if (diffDays > 14) {
                const weeks = Math.ceil(diffDays / 7);
                return `${weeks} Week${weeks > 1 ? 's' : ''} Away`;
            } else if (diffDays < 0 && diffDays >= -7) {
                const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                return `Last ${dayNames[targetDate.getDay()]}`;
            } else {
                return targetDate.toLocaleDateString('en-GB', { 
                    day: 'numeric', 
                    month: 'short', 
                    year: 'numeric' 
                });
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadVehicles();
            setupForm();
            startAutoRefresh();
            updateQueueDisplay();
            
            // Show connection status
            showNotification('Connected to server - data will persist across devices!', 'success');
        });

        // View switching
        function switchView(view) {
            currentView = view;
            
            // Update toggle buttons
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update views
            document.getElementById('form-view').classList.remove('active');
            document.getElementById('dashboard-view').classList.remove('active');
            document.getElementById(view + '-view').classList.add('active');
            
            if (view === 'dashboard') {
                updateQueueDisplay();
                // Reset controls visibility when switching to dashboard
                dashboardControlsHidden = false;
                updateDashboardControlsVisibility();
            }
        }

        // Toggle dashboard controls
        function toggleDashboardControls() {
            dashboardControlsHidden = !dashboardControlsHidden;
            updateDashboardControlsVisibility();
        }

        // Update dashboard controls visibility
        function updateDashboardControlsVisibility() {
            const viewToggle = document.getElementById('view-toggle');
            const dashboardHeader = document.getElementById('dashboard-header');
            
            if (dashboardControlsHidden) {
                viewToggle.classList.add('hidden');
                dashboardHeader.classList.add('hidden');
            } else {
                viewToggle.classList.remove('hidden');
                dashboardHeader.classList.remove('hidden');
            }
        }

        // Form handling
        function setupForm() {
            const form = document.getElementById('vehicle-form');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                addVehicle();
            });
        }

        async function addVehicle() {
            const formData = new FormData(document.getElementById('vehicle-form'));
            
            // Collect checked work items
            const workItems = [];
            const checkboxes = document.querySelectorAll('.checkbox-item input[type="checkbox"]:checked');
            checkboxes.forEach(checkbox => {
                workItems.push(checkbox.value);
            });
            
            // Get additional work
            const additionalWork = formData.get('additionalWork');
            
            // Combine work items
            let workRequired = workItems.join(', ');
            if (additionalWork && additionalWork.trim()) {
                workRequired += workItems.length > 0 ? ' | ' + additionalWork : additionalWork;
            }
            
            // Collect status checkboxes
            const roCompleted = formData.get('roCompleted') === 'RO Completed';
            const carOnsite = formData.get('carOnsite') === 'Car Onsite';
            
            const vehicleData = {
                stockNumber: formData.get('stockNumber'),
                brand: formData.get('brand'),
                model: formData.get('model'),
                dateRequired: formData.get('dateRequired'),
                salesman: formData.get('salesman'),
                purpose: formData.get('purpose'),
                workRequired: workRequired,
                workItems: workItems,
                additionalWork: additionalWork,
                roCompleted: roCompleted,
                carOnsite: carOnsite
            };

            try {
                const response = await fetch(`${API_BASE_URL}/vehicles`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(vehicleData)
                });

                if (!response.ok) {
                    throw new Error('Failed to add vehicle');
                }

                const result = await response.json();
                vehicles.unshift(result.vehicle);
                updateQueueDisplay();
                
                // Reset form
                document.getElementById('vehicle-form').reset();
                
                // Uncheck all checkboxes
                document.querySelectorAll('.checkbox-item input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                });
                
                // Show success message
                showNotification('Vehicle added to queue successfully!', 'success');
                
                // Switch to dashboard view to show the new entry
                if (currentView === 'form') {
                    setTimeout(() => {
                        switchView('dashboard');
                        document.querySelector('.toggle-btn[onclick="switchView(\'dashboard\')"]').classList.add('active');
                        document.querySelector('.toggle-btn[onclick="switchView(\'form\')"]').classList.remove('active');
                    }, 1000);
                }
            } catch (error) {
                console.error('Error adding vehicle:', error);
                showNotification('Failed to add vehicle. Please try again.', 'error');
            }
        }

        // Queue management
        async function markAsReady(id) {
            if (confirm('Mark this vehicle as ready and remove from queue?')) {
                try {
                    // Add completion animation
                    const vehicleElement = document.getElementById(`vehicle-${id}`);
                    if (vehicleElement) {
                        vehicleElement.classList.add('completing');
                    }
                    
                    const response = await fetch(`${API_BASE_URL}/vehicles/${id}`, {
                        method: 'DELETE'
                    });

                    if (!response.ok) {
                        throw new Error('Failed to mark vehicle as ready');
                    }

                    // Wait for animation to complete before removing from local array
                    setTimeout(() => {
                        vehicles = vehicles.filter(v => v.id !== id);
                        updateQueueDisplay();
                        showNotification('Vehicle completed successfully! 🎉', 'success');
                    }, 1500);
                } catch (error) {
                    console.error('Error marking vehicle as ready:', error);
                    showNotification('Failed to mark vehicle as ready. Please try again.', 'error');
                }
            }
        }

        async function clearQueue() {
            const password = document.getElementById('adminPassword').value;
            if (password === ADMIN_PASSWORD) {
                try {
                    const response = await fetch(`${API_BASE_URL}/vehicles`, {
                        method: 'DELETE',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ password })
                    });

                    if (!response.ok) {
                        throw new Error('Failed to clear queue');
                    }

                    vehicles = [];
                    updateQueueDisplay();
                    hideClearModal();
                    showNotification('All vehicles cleared from queue!', 'success');
                } catch (error) {
                    console.error('Error clearing queue:', error);
                    showNotification('Failed to clear queue. Please try again.', 'error');
                }
            } else {
                alert('Incorrect password!');
            }
        }

        // Display functions
        function updateQueueDisplay() {
            const queueList = document.getElementById('queue-list');
            const queueCount = document.getElementById('queue-count');
            
            queueCount.textContent = vehicles.length;
            
            if (vehicles.length === 0) {
                queueList.innerHTML = `
                    <div class="empty-state">
                        <h3>📋 No Vehicles in Queue</h3>
                        <p>Add a new vehicle using the form to get started!</p>
                    </div>
                `;
                return;
            }
            
            queueList.innerHTML = vehicles.map(vehicle => `
                <div class="queue-item ${vehicle.isNew ? 'new' : ''}" id="vehicle-${vehicle.id}">
                    <div class="item-header">
                        <div class="stock-number">#${vehicle.stockNumber}</div>
                        <div class="timestamp">${vehicle.timestamp}</div>
                    </div>
                    <div class="vehicle-info">
                        <div class="info-group">
                            <div class="info-label">Brand</div>
                            <div class="info-value">${vehicle.brand}</div>
                        </div>
                        <div class="info-group">
                            <div class="info-label">Model</div>
                            <div class="info-value">${vehicle.model}</div>
                        </div>
                        <div class="info-group">
                            <div class="info-label">Date Required</div>
                            <div class="info-value date-display">${formatRelativeDate(vehicle.dateRequired)}</div>
                        </div>
                        <div class="info-group">
                            <div class="info-label">Salesman</div>
                            <div class="info-value">${vehicle.salesman}</div>
                        </div>
                        <div class="info-group">
                            <div class="info-label">Purpose</div>
                            <div class="info-value purpose-display ${vehicle.purpose === 'Mark as Priority' ? 'priority-purpose' : ''}">${vehicle.purpose}</div>
                        </div>
                    </div>
                    <div class="work-required">
                        <div class="info-label">Work Required</div>
                        <div class="info-value">
                            ${vehicle.workItems && vehicle.workItems.length > 0 ? 
                                `<div class="work-items">${vehicle.workItems.map(item => `<span class="work-tag">${item}</span>`).join('')}</div>` : ''
                            }
                            ${vehicle.additionalWork && vehicle.additionalWork.trim() ? 
                                `<div class="additional-work"><strong>Additional:</strong> ${vehicle.additionalWork}</div>` : ''
                            }
                        </div>
                    </div>
                    <div class="status-section">
                        <div class="status-item ${vehicle.roCompleted ? 'completed' : 'pending'}">
                            <span class="status-icon">${vehicle.roCompleted ? '✅' : '⏳'}</span>
                            <span class="status-text">RO ${vehicle.roCompleted ? 'Completed' : 'Pending'}</span>
                        </div>
                        <div class="status-item ${vehicle.carOnsite ? 'onsite' : 'offsite'}">
                            <span class="status-icon">${vehicle.carOnsite ? '🚗' : '📋'}</span>
                            <span class="status-text">Car ${vehicle.carOnsite ? 'Onsite' : 'Offsite'}</span>
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="edit-btn" onclick="editVehicle(${vehicle.id})">
                            ✏️ Edit
                        </button>
                        <button class="ready-btn" onclick="markAsReady(${vehicle.id})">
                            ✅ Mark as Ready
                        </button>
                    </div>
                </div>
            `).join('');
            
            // Remove 'new' class after animation
            setTimeout(() => {
                vehicles.forEach(v => v.isNew = false);
            }, 500);
        }

        // Storage functions with server API support
        async function loadVehicles() {
            try {
                const response = await fetch(`${API_BASE_URL}/vehicles`);
                if (response.ok) {
                    const result = await response.json();
                    vehicles = result.vehicles;
                    lastDataHash = JSON.stringify(vehicles);
                } else {
                    console.error('Failed to load vehicles from server');
                    vehicles = [];
                }
            } catch (error) {
                console.error('Error loading vehicles:', error);
                showNotification('Failed to connect to server. Using local data.', 'warning');
                vehicles = [];
            }
        }

        // Auto-refresh functionality with server data detection
        function startAutoRefresh() {
            autoRefreshInterval = setInterval(async () => {
                await checkForServerUpdates();
                if (currentView === 'dashboard') {
                    updateQueueDisplay();
                }
            }, 3000); // Refresh every 3 seconds for better real-time updates
        }

        // Check for updates from server
        async function checkForServerUpdates() {
            try {
                const response = await fetch(`${API_BASE_URL}/vehicles`);
                if (response.ok) {
                    const result = await response.json();
                    const newHash = JSON.stringify(result.vehicles);
                    
                    if (newHash !== lastDataHash) {
                        vehicles = result.vehicles;
                        lastDataHash = newHash;
                        
                        // Show update notification
                        if (currentView === 'dashboard') {
                            showNotification('Queue updated from server', 'info');
                        }
                    }
                }
            } catch (error) {
                console.error('Error checking for server updates:', error);
            }
        }

        // Export functionality
        async function exportToCSV() {
            if (vehicles.length === 0) {
                alert('No vehicles to export!');
                return;
            }
            
            try {
                const response = await fetch(`${API_BASE_URL}/export`);
                if (response.ok) {
                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `get-ready-queue-${new Date().toISOString().split('T')[0]}.csv`;
                    a.click();
                    window.URL.revokeObjectURL(url);
                    
                    showNotification('CSV exported successfully!', 'success');
                } else {
                    throw new Error('Failed to export CSV');
                }
            } catch (error) {
                console.error('Error exporting CSV:', error);
                showNotification('Failed to export CSV. Please try again.', 'error');
            }
        }

        // Modal functions
        function showClearModal() {
            document.getElementById('clearModal').style.display = 'block';
            document.getElementById('adminPassword').focus();
        }

        function hideClearModal() {
            document.getElementById('clearModal').style.display = 'none';
            document.getElementById('adminPassword').value = '';
        }

        function showUploadModal() {
            document.getElementById('uploadModal').style.display = 'block';
        }

        function hideUploadModal() {
            document.getElementById('uploadModal').style.display = 'none';
            document.getElementById('csvFile').value = '';
        }

        function showEditModal() {
            document.getElementById('editModal').style.display = 'block';
        }

        function hideEditModal() {
            document.getElementById('editModal').style.display = 'none';
            editingVehicleId = null;
            document.getElementById('edit-form').reset();
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const colors = {
                'success': '#27ae60',
                'info': '#3498db',
                'warning': '#f39c12',
                'error': '#e74c3c'
            };
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: ${colors[type] || colors.info};
                color: white;
                padding: 15px 25px;
                border-radius: 12px;
                z-index: 10000;
                font-size: 1rem;
                font-weight: 500;
                box-shadow: 0 8px 25px rgba(0,0,0,0.2);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255,255,255,0.2);
                animation: slideDown 0.3s ease-out;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideUp 0.3s ease-out';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }

        // Add CSS animations for notifications
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideDown {
                from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
                to { transform: translateX(-50%) translateY(0); opacity: 1; }
            }
            @keyframes slideUp {
                from { transform: translateX(-50%) translateY(0); opacity: 1; }
                to { transform: translateX(-50%) translateY(-100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Close modal when clicking outside
        window.onclick = function(event) {
            const clearModal = document.getElementById('clearModal');
            const uploadModal = document.getElementById('uploadModal');
            const editModal = document.getElementById('editModal');
            
            if (event.target === clearModal) {
                hideClearModal();
            }
            if (event.target === uploadModal) {
                hideUploadModal();
            }
            if (event.target === editModal) {
                hideEditModal();
            }
        }

        // Handle Enter key in password field
        document.getElementById('adminPassword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                clearQueue();
            }
        });

        // Setup edit form
        document.getElementById('edit-form').addEventListener('submit', function(e) {
            e.preventDefault();
            saveEditedVehicle();
        });

        // Edit vehicle function
        function editVehicle(id) {
            const vehicle = vehicles.find(v => v.id === id);
            if (!vehicle) return;

            editingVehicleId = id;
            
            // Populate form fields
            document.getElementById('editStockNumber').value = vehicle.stockNumber;
            document.getElementById('editBrand').value = vehicle.brand;
            document.getElementById('editModel').value = vehicle.model;
            document.getElementById('editDateRequired').value = vehicle.dateRequired;
            document.getElementById('editSalesman').value = vehicle.salesman;
            document.getElementById('editPurpose').value = vehicle.purpose;
            document.getElementById('editAdditionalWork').value = vehicle.additionalWork || '';

            // Clear and set checkboxes
            document.querySelectorAll('#editModal input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });

            if (vehicle.workItems) {
                vehicle.workItems.forEach(item => {
                    const checkbox = document.querySelector(`#editModal input[value="${item}"]`);
                    if (checkbox) checkbox.checked = true;
                });
            }

            // Set status checkboxes
            document.getElementById('editRoCompleted').checked = vehicle.roCompleted || false;
            document.getElementById('editCarOnsite').checked = vehicle.carOnsite || false;

            showEditModal();
        }

        // Save edited vehicle
        async function saveEditedVehicle() {
            if (!editingVehicleId) return;

            const formData = new FormData(document.getElementById('edit-form'));
            
            // Collect checked work items
            const workItems = [];
            const checkboxes = document.querySelectorAll('#editModal .checkbox-item input[type="checkbox"]:checked');
            checkboxes.forEach(checkbox => {
                workItems.push(checkbox.value);
            });
            
            // Get additional work
            const additionalWork = formData.get('additionalWork');
            
            // Combine work items
            let workRequired = workItems.join(', ');
            if (additionalWork && additionalWork.trim()) {
                workRequired += workItems.length > 0 ? ' | ' + additionalWork : additionalWork;
            }

            // Collect status checkboxes
            const roCompleted = formData.get('roCompleted') === 'RO Completed';
            const carOnsite = formData.get('carOnsite') === 'Car Onsite';
            
            const vehicleData = {
                stockNumber: formData.get('stockNumber'),
                brand: formData.get('brand'),
                model: formData.get('model'),
                dateRequired: formData.get('dateRequired'),
                salesman: formData.get('salesman'),
                purpose: formData.get('purpose'),
                workRequired: workRequired,
                workItems: workItems,
                additionalWork: additionalWork,
                roCompleted: roCompleted,
                carOnsite: carOnsite
            };

            try {
                const response = await fetch(`${API_BASE_URL}/vehicles/${editingVehicleId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(vehicleData)
                });

                if (!response.ok) {
                    throw new Error('Failed to update vehicle');
                }

                const result = await response.json();
                
                // Update local array
                const vehicleIndex = vehicles.findIndex(v => v.id === editingVehicleId);
                if (vehicleIndex !== -1) {
                    vehicles[vehicleIndex] = result.vehicle;
                }

                updateQueueDisplay();
                hideEditModal();
                showNotification('Vehicle updated successfully!', 'success');
            } catch (error) {
                console.error('Error updating vehicle:', error);
                showNotification('Failed to update vehicle. Please try again.', 'error');
            }
        }

        // CSV Upload function
        async function uploadCSV() {
            const fileInput = document.getElementById('csvFile');
            const file = fileInput.files[0];
            
            if (!file) {
                showNotification('Please select a CSV file', 'error');
                return;
            }

            const reader = new FileReader();
            reader.onload = async function(e) {
                try {
                    const csv = e.target.result;
                    
                    const response = await fetch(`${API_BASE_URL}/import`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ csvData: csv })
                    });

                    if (!response.ok) {
                        throw new Error('Failed to import CSV');
                    }

                    const result = await response.json();
                    
                    // Reload vehicles from server
                    await loadVehicles();
                    updateQueueDisplay();
                    hideUploadModal();
                    showNotification(result.message, 'success');
                    
                } catch (error) {
                    showNotification('Error importing CSV file. Please check the format.', 'error');
                    console.error('CSV upload error:', error);
                }
            };
            
            reader.readAsText(file);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + 1: Switch to form
            if ((e.ctrlKey || e.metaKey) && e.key === '1') {
                e.preventDefault();
                switchView('form');
                document.querySelector('.toggle-btn[onclick="switchView(\'form\')"]').classList.add('active');
                document.querySelector('.toggle-btn[onclick="switchView(\'dashboard\')"]').classList.remove('active');
            }
            // Ctrl/Cmd + 2: Switch to dashboard
            if ((e.ctrlKey || e.metaKey) && e.key === '2') {
                e.preventDefault();
                switchView('dashboard');
                document.querySelector('.toggle-btn[onclick="switchView(\'dashboard\')"]').classList.add('active');
                document.querySelector('.toggle-btn[onclick="switchView(\'form\')"]').classList.remove('active');
            }
        });
    </script>
</body>
</html> 